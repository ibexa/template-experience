.c-tb-list-item {
    line-height: calculateRem(21px);
    min-height: calculateRem(21px);
    position: relative;

    &__indentation {
        width: calc(#{calculateRem(-6px)} + (var(--indent, 0) + 1) * #{calculateRem(16px)});
        position: relative;
    }

    &__indentation-line {
        position: absolute;
        z-index: 1;

        &--horizontal {
            width: calculateRem(1px);
            top: calculateRem(16px);
            left: calc(#{calculateRem(24px)} + (var(--indent, 0) + 1) * #{calculateRem(16px)});
            background: repeating-linear-gradient(
                $ibexa-color-dark-300,
                $ibexa-color-dark-300 calculateRem(2px),
                transparent calculateRem(2px),
                transparent calculateRem(4px)
            );
        }

        &--vertical {
            $indent-width: calc(#{calculateRem(-7px)} + var(--indent, 0) * #{calculateRem(16px)});

            width: calc(100% - (#{$indent-width} + #{calculateRem(3px)}));
            height: calculateRem(1px);
            top: calculateRem(-1px);
            left: calc(#{$indent-width});
            background: repeating-linear-gradient(
                90deg,
                $ibexa-color-dark-300,
                $ibexa-color-dark-300 calculateRem(2px),
                transparent calculateRem(2px),
                transparent calculateRem(4px)
            );

            &.c-tb-list-item__indentation-line {
                &--hidden {
                    display: none;
                }

                &--no-sub-items {
                    width: calc(100% - #{$indent-width} + #{calculateRem(16px)});
                }
            }
        }
    }

    &__row {
        display: flex;
        align-items: center;
        padding-right: calculateRem(4px);
        border-radius: $ibexa-border-radius;
        border: calculateRem(1px) solid transparent;

        &--no-checkbox {
            padding-left: calculateRem(32px);
        }

        .ibexa-input--checkbox {
            margin-left: calculateRem(4px);
        }
    }

    &__drag-icon {
        margin-left: calculateRem(4px);
        width: calculateRem(8px);
        opacity: 0;
    }

    &__label {
        display: flex;
        align-items: center;
        flex: 1;
        white-space: nowrap;
        position: relative;
        font-size: calculateRem(14px);
        line-height: calculateRem(21px);
        min-height: calculateRem(21px);
        padding: calculateRem(5px) calculateRem(14px);
        color: $ibexa-color-dark;
        overflow: hidden;
        text-overflow: ellipsis;
        text-decoration: none;

        &:hover,
        &:focus {
            text-decoration: none;
            color: inherit;
        }
    }

    &__label-truncated {
        overflow: hidden;
        text-overflow: ellipsis;
    }

    &__load-more-btn {
        display: flex;
        align-items: center;
        background: $ibexa-white;
        color: $ibexa-color-dark;
        border: calculateRem(1px) solid $ibexa-color-font-pale;
        padding: calculateRem(4px) calculateRem(8px);
        margin: calculateRem(8px) calculateRem(26px);
        transition: background 0.3s $ibexa-admin-transition, color 0.3s $ibexa-admin-transition;
        font-size: calculateRem(14px);

        &:focus {
            box-shadow: 0 0 0 calculateRem(3px) rgba($ibexa-color-primary, 0.25);
        }

        &:hover {
            color: $ibexa-white;
            background: $ibexa-color-primary;
            border: calculateRem(1px) solid $ibexa-color-font-pale;

            .ibexa-icon {
                fill: $ibexa-white;
            }
        }

        .ibexa-icon {
            fill: $ibexa-color-primary;
        }
    }

    &__load-more-btn-spinner {
        margin-right: calculateRem(4px);
    }

    &__load-more-limit-info {
        margin-left: calculateRem(26px);
        color: $ibexa-color-dark;
        font-size: $ibexa-text-font-size-medium;
        font-style: italic;
    }

    .c-tb-list {
        opacity: 0;
        list-style: none;
        max-height: 0;
        max-width: 0;
        overflow: hidden;
    }

    &--has-sub-items {
        > .c-tb-list-item__row {
            .c-tb-toggler {
                cursor: pointer;

                &:before {
                    content: '';
                }
            }
        }
    }

    &--expanded {
        max-height: initial;

        > .c-tb-list {
            opacity: 1;
            max-height: calculateRem(20000px);
            max-width: initial;
            overflow: initial;
        }

        > .c-tb-list-item__row {
            .c-tb-toggler {
                &:before {
                    border-width: calculateRem(6px) calculateRem(4px) 0 calculateRem(4px);
                    border-color: $ibexa-black transparent transparent transparent;
                    transform: translateY(-50%);
                }
            }
        }
    }

    &--hidden {
        > .c-tb-list-item__row {
            border-color: $ibexa-color-light-400;
            background: repeating-linear-gradient(
                -80deg,
                transparent,
                transparent calculateRem(4px),
                $ibexa-color-light-400 calculateRem(4px),
                $ibexa-color-light-400 calculateRem(5px)
            );
        }
    }

    &--active {
        > .c-tb-list-item__row {
            border-color: $ibexa-color-light-400;
            background-color: $ibexa-color-light-400;
        }
    }

    &--disabled:not(&--source) {
        > .c-tb-list-item {
            &__row {
                opacity: 0.2;
            }
        }
    }

    &--source {
        border-radius: $ibexa-border-radius;
        border: calculateRem(1px) dashed $ibexa-color-base;
        background-color: $ibexa-color-base-medium;

        > .c-tb-list-item {
            &__row {
                border-radius: $ibexa-border-radius;
                box-shadow: 0 calculateRem(4px) calculateRem(12px) 0 rgba(0, 0, 0, 0.2);
                transform: translate(calculateRem(10px), calculateRem(5px));
                max-width: calc(100% - #{calculateRem(10px)});
                background: $ibexa-white;
            }
        }
    }

    &--destination {
        background-color: $ibexa-color-info-100;
        border: calculateRem(1px) solid $ibexa-color-info;
        border-radius: $ibexa-border-radius;
        color: $ibexa-color-info;
        margin: calculateRem(-1px);

        .ibexa-input--checkbox {
            border-color: $ibexa-color-info;
        }

        .c-tb-toggler:before {
            border-color: transparent transparent transparent $ibexa-color-info;
        }

        &.c-tb-list-item {
            &--expanded {
                .c-tb-toggler:before {
                    border-color: $ibexa-color-info transparent transparent transparent;
                }
            }
        }

        .c-tb-list-item {
            &__label {
                color: $ibexa-color-info;
            }
        }
    }

    &--hovered {
        > .c-tb-list-item__row {
            border-color: $ibexa-color-light;
            box-shadow: calculateRem(4px) calculateRem(22px) calculateRem(47px) 0 rgba($ibexa-color-info, 0.05);

            .c-tb-contextual-menu,
            .c-tb-list-menu {
                display: block;
            }
        }
    }
}
